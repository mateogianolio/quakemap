<!doctype html>

<html>
  <head>
    <title>QuakeMap</title>

    <meta name="viewport" content="initial-scale=1, maximum-scale=1">

    <script src="https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.js"></script>
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-heat/v0.1.3/leaflet-heat.js'></script>

    <script src="https://use.typekit.net/qmn5yds.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>

    <link href="https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="map.css">

    <style>
      #box {
        width: 100%;
        max-width: 400px;
        position: absolute;
        bottom: 5%;
        left: 5%;
        padding: 30px 15px;
      }

      #box>h1 {
        font-family: 'adelle', 'Georgia', serif;
        font-weight: bold;
        font-size: 32px;
        margin-bottom: 15px;
        color: #fff8f0;
        text-shadow: 0 1px 2px #009688;
      }

      #box>h2 {
        font-family: 'jubilat', 'Helvetica Neue', sans-serif;
        font-weight: normal;
        font-size: 20px;
        color: #009688;
        margin-bottom: 15px;
        text-shadow: 0 1px 1px #fff;
      }

      #box>p {
        font-family: 'jubilat', 'Helvetica Neue', sans-serif;
        font-size: 16px;
        line-height: 1.5;
        color: #00695C;
        margin-bottom: 15px;
      }

      a {
        color: #004D40;
        font-weight: bold;
      }

      @media (max-width: 960px) {
        #box {
          width: 90%;
          max-width: 90%;
          left: 0;
          bottom: 0;
        }

        #box>h1 { font-size: 24px; }
        #box>h2 { font-size: 16px; }
        #box>p { font-size: 14px; }
        #box>#extra { display: none; }
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <div id="box">
      <h1>
        Global earthquake heatmap
      </h1>
      <h2 id="time"></h2>
      <p id="extra">
        A heatmap synchronously accumulating <strong>30 years</strong> of earthquake data (February 1986 to February 2016)
        directly from <a href="http://earthquake.usgs.gov/earthquakes/feed/v1.0/index.php">USGS</a>.
      </p>
      <p>
        <strong>Click anywhere</strong> to run, click again to pause. Limited to 1 request/sec to be nice to USGS servers.
      </p>
      <p>&copy; <a href='https://www.mapbox.com/about/maps/'>Mapbox</a> &copy; <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a>.</p>
    </div>
    <script src="map.js"></script>
    <script>
      document.addEventListener('click', function () {
        window.pause = !window.pause;
        if (window.pause) {
          window.quakes = 0;
          heat.setLatLngs([]);
          document.getElementById('time').innerHTML = '';
        }
          traverse(new Date('1986-02-01'));
      });
    </script>
  </body>
</html>
